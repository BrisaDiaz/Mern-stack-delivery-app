{"version":3,"sources":["components/OrdersTableSkeleton.js","img/refresh.svg","API/getCategoriesAPI.js","API/deleteOrderAPI.js","components/account/UserOrdersPage.js","hooks/useUserOrdersPage.js","components/FilterOrderStateOptions.js","components/SortOrdersOptions.js","components/dashboard/DashboardOrders.js","hooks/useDashboardOrders.js","API/updateCategoryNameAPI.js","API/deleteCategoryAPI.js","API/createCategoryAPI.js","hooks/useDashboardCategories.js","components/dashboard/DashboardCategories.js"],"names":["Table","styled","div","TableHeader","TableCells","OrdersTableSkeleton","getCategoryAPI","setAllCategories","a","headers","Headers","append","setting","method","fetch","res","json","data","console","log","token","id","message","deleteOrderAPI","Page","main","props","theme","lightYellow","isLoading","LoaderSpinner","TableHead","thead","black","darckYellow","OrdersTable","table","lihgtBoxShadow","CancelOrderButton","button","disabled","NotFounMessage","ButtonPrimary","NotFounIcone","h2","RefreshButton","RefreshIcone","img","UserOrdersPage","setNotification","history","useHistory","useStorage","setIsLoading","currentUser","deleteOrder","e","stopPropagation","target","setIsLoadingPage","handleRefresh","query","URLSearchParams","useState","page","setPage","maxPage","setMaxPage","orders","setOrders","isFirstRender","setIsFirstRender","refreshCount","setRefreshCount","useEffect","controller","AbortController","signal","_id","total","parseInt","Math","ceil","document","querySelector","scrollTo","name","ordersAPI","abort","Date","now","seeDetails","orderID","push","useUserOrdersPage","light","onClick","src","refreshIcone","title","length","small","as","Link","to","map","order","states","date","toLocaleString","split","client","address","reverse","find","state","confirmed","PaginationButtons","FilterOrdersStateOptions","setStatePreferece","defaultValue","onChange","preventDefault","value","handelChange","SortOrdersOptions","setSortPreferece","section","NotFaundMessage","FiltersBoard","DashboardOrders","location","useLocation","search","oldQuery","setOrderID","setState","sorting","setSorting","toString","useDashboardOrders","DashboardNav","placeholder","setSearch","data-testid","categorySelectId","info","setIsRenameFormLoading","setIsSuccessfullySend","body","JSON","stringify","status","getCategoriesAPI","setTimeout","deleteCategoryAPI","alert","setIsCreateFormLoading","newCategory","createCategoryAPI","useCategoriesForms","categories","editingCategory","setEditingCategory","isRenameFormLoading","isCreateFormLoading","setCategorySelectId","categoryId","category","handleDelete","window","confirm","handleRenameSubmit","categoryNewName","trim","updateCategoryNameAPI","handleCreateSubmit","CategoriesPage","Input","TextInput","inputBoxShadow","Wrapper","FormCard","article","lightBoxShadow","DeleteButton","orange","withError","useDashboardCategories","onSubmit","cat","type"],"mappings":"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","file":"static/js/13.c7fe5c43.chunk.js","sourcesContent":["import styled from 'styled-components'\r\n\r\nconst Table = styled.div`\r\nwidth:100%;\r\nmax-width:900px;\r\nmargin:20px auto 0;\r\nbackground:gray;\r\nbox-shadow: 1px 1px 5px #00000057;\r\nbackground:#f3f3f3;\r\n@media screen and (max-width: 750px){\r\n   max-width: 400px;\r\n}\r\n`\r\nconst TableHeader = styled.div`\r\nwidth:100%;\r\nheight:60px;\r\nbackground:#ccc;\r\nbox-shadow: 1px 1px 5px #00000057;\r\nborder-bottom:1px solid #ccc;\r\n`\r\nconst TableCells = styled.div`\r\nwith:100%;\r\nheight:50px;\r\nbackground:white;\r\nmargin: 1px 0;\r\nbackground:#fff;\r\nborder-bottom:1px solid #ccc;\r\nbox-shadow: 0 1px 3px #ccc;\r\n\r\n@media screen and (max-width: 750px){\r\nheight:100px;\r\n}\r\n`\r\n\r\nexport default function OrdersTableSkeleton() {\r\n\r\n  return(\r\n<Table>\r\n  <TableHeader/>\r\n<TableCells/>\r\n<TableCells/>\r\n<TableCells/>\r\n<TableCells/>\r\n<TableCells/>\r\n</Table>\r\n\r\n  )\r\n}","export default __webpack_public_path__ + \"static/media/refresh.f1c42ba5.svg\";","\r\n\r\nexport default async function getCategoryAPI(setAllCategories){\r\n\r\n   const headers = new Headers();\r\n        headers.append('Accept', 'application/json');\r\n     \r\n\r\n    const setting = {\r\n          method: 'GET',\r\n          headers: headers,\r\n\r\n        }\r\ntry{\r\nlet res =  await fetch('/api/categories',setting)\r\nlet  json= await res.json()\r\n\r\nconst {data} = json\r\n\r\nsetAllCategories(data)\r\n\r\n\r\n}catch(err){\r\n\r\n\r\n  console.log(err)\r\n}\r\n}  \r\n","\r\n\r\nasync function deleteOrderAPI({token,id}){\r\n\r\n     const headers = new Headers();\r\n        headers.append('Accept', 'application/json');\r\n     headers.append('Authorization', `Bearer ${token}`);\r\n\r\n\r\n        const setting = {\r\n          method: 'DELETE',\r\n          headers: headers,\r\n\r\n        }\r\n\r\n\r\ntry {\r\n\r\n        let res = await fetch( `/api/orders/${id}`, setting);\r\n        let json = await res.json()\r\n         if(res!== 204){\r\n           console.log( json.message)\r\n         }\r\n\r\n      } catch (err) { console.log(err)}\r\n\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n  \r\n\r\n\r\nexport default deleteOrderAPI","import styled  from 'styled-components'\r\nimport React from 'react'\r\nimport {Link} from 'react-router-dom'\r\nimport useUserOrdersPage from '../../hooks/useUserOrdersPage'\r\nimport {ButtonPrimary} from '../Buttons'\r\nimport {SectionTitle} from '../menu/Menu'\r\nimport PaginationButtons from '../PaginationButtons'\r\nimport OrdersTableSkeleton from '../OrdersTableSkeleton'\r\nimport refreshIcone from '../../img/refresh.svg'\r\nimport {LoaderSpinner} from '../LoaderSpinner'\r\n\r\nconst Page = styled.main`\r\n    padding: 65px 5px;\r\nmin-height:100vh;\r\nwidth:100%;\r\nmargin: 0 auto;\r\ntext-align:center;\r\nbackground:${props => props.theme.lightYellow};\r\n  &:before{\r\n    display: ${props => props.isLoading ? 'block' : 'none'};\r\n      position:absolute;\r\n      content:\" \";\r\n      top:0;\r\n      left:0;\r\n    right:0;\r\n    bottom:0;\r\n    background:#ffffff57;\r\n    z-index:400;\r\n    }\r\n       & >${LoaderSpinner} {\r\n  position: fixed;\r\n    top: 50%;\r\n    left: 50%;\r\n    z-index: 500;\r\n    margin: -60px 0  0 -60px ;\r\n\r\n}\r\n`;\r\nexport const TableHead = styled.thead`\r\nbackground-color: ${props => props.theme.black};\r\ncolor: ${props => props.theme.darckYellow};\r\n& > tr th {\r\n   padding: 10px 0;\r\n       font-family: \"Oswald\", sans-serif;\r\n       font-size:19px;\r\n}\r\n`;\r\nexport const OrdersTable = styled.table`\r\n    width: 100%;\r\nmax-width:900px;\r\nmargin: 20px auto 30px;\r\n    border-spacing: 10px;\r\n    border-collapse: collapse;\r\n    border: 2px solid ${props => props.theme.black};\r\n        box-shadow: ${props => props.theme.lihgtBoxShadow};\r\n        text-transform: capitalize;\r\n&> tbody{\r\n  background:#fff;\r\n}\r\n& > tbody td span + span{\r\n       margin-right: 5px;\r\n}\r\n& >tbody td {\r\n  padding: 10px 0;\r\n  cursor:pointer;\r\n}\r\n& > tbody tr {\r\n     border-bottom: 1px solid;\r\n}\r\n@media screen and (max-width: 750px){\r\n   max-width: 400px;\r\n  & > ${TableHead}{\r\n  display: none;\r\n    max-width: 400px;\r\n}\r\n& tbody tr {\r\ndisplay: flex;\r\n  flex-direction: column;\r\n          border-bottom: 1px solid rgb(0 0 0 / 45%);\r\n}\r\n& >  tbody tr td {\r\n      display: flex;\r\n    padding: 5px 15px;\r\n    text-align: right;\r\n}\r\n& >  tbody tr td:first-child {\r\n  color:#fff;\r\n  padding: 10px 15px;\r\nbackground-color: ${props => props.theme.black};\r\n}\r\n& >  tbody tr td:first-child:before {\r\ncontent:\"N췈 de Pedido\";\r\n    color: ${props => props.theme.darckYellow};\r\n}\r\n& >  tbody tr td:nth-child(3):before {\r\ncontent:\"Direcci칩n\";\r\n}\r\n& >  tbody tr td:nth-child(2):before {\r\ncontent:\"Fecha\";\r\n}\r\n& >  tbody tr td:nth-child(5):before {\r\ncontent:\"Estado\";\r\n}\r\n& >  tbody tr td:nth-child(4):before {\r\ncontent:\"Total\";\r\n}\r\n& >  tbody tr td:nth-child(6):before {\r\ncontent:\"Acciones\";\r\n}\r\n& >tbody tr td:before{\r\n      margin-right: auto;\r\n    font-family: \"Oswald\", sans-serif;\r\n    font-size: 16px;\r\n    align-self: center;\r\npadding-rigth:5px;\r\n}\r\n}\r\n`\r\n\r\nconst CancelOrderButton = styled.button`\r\npadding:  8px 5px;\r\ncursor:pointer;\r\noutline:none;\r\nmargin: 5px ;\r\n    border-radius: 10px 5px;\r\nborder: none;\r\nfont-family: \"Oswald\", sans-serif;\r\ntransition:all 0.5s ;\r\nopacity:${((props) => (props.disabled ? \"0.4\" : \"1\"))};\r\n&:hover {\r\nbackground:${((props) => (props.disabled ? \"unset\" : \"#cdc8c8\"))};\r\n}\r\n`\r\nconst NotFounMessage = styled.div`\r\npadding: 30px 0;\r\n& >h3{\r\nmargin-bottom:40px;\r\n}\r\n@media screen and (max-width:450px){\r\n  font-size: 25px;\r\n}\r\n& > ${ButtonPrimary} {\r\n      padding: 15px 30px;\r\n}\r\n`;\r\nconst NotFounIcone = styled.h2`\r\nfont-size:50px;\r\n`;\r\nexport const RefreshButton = styled.div`\r\ncursor:pointer;\r\npadding:0 10px;\r\nalign-items: center;\r\n    border-radius: 5px;\r\n    height: 40px;\r\n      box-shadow: ${props => props.theme.lihgtBoxShadow};\r\n    background:${props => props.theme.black};\r\n\r\n    margin: -46px 0 10px auto;\r\n    width: max-content;\r\ndisplay: flex;\r\n    transform: scale(0.7);\r\n    transition: all 0.3s ease;\r\n&:hover{\r\n  transform:scale(0.75);\r\n}\r\n`\r\n\r\n\r\nexport const RefreshIcone = styled.img`\r\nheight: 50%;\r\ncursor:pointer;\r\n`;\r\n\r\n\r\n\r\n export default function UserOrdersPage({setNotification}){\r\n\r\nconst {seeDetails,handleRefresh,setPage,page,isLoading,maxPage,orders,isFirstRender,deleteOrder} = useUserOrdersPage({setNotification})\r\n\r\n\r\n\r\n  return(\r\n\r\n<Page isLoading={isLoading}>\r\n\r\n  {isLoading ? <LoaderSpinner /> :  null }\r\n\r\n  <SectionTitle light>Mis Pedidos</SectionTitle>\r\n\r\n<RefreshButton onClick={ () => handleRefresh()}>\r\n  <RefreshIcone onClick={ () => handleRefresh()}   src={refreshIcone} title='Refrescar P치gina'/>\r\n  </RefreshButton>\r\n\r\n  { ((isLoading) && (isFirstRender) ) && <OrdersTableSkeleton/>}\r\n\r\n {  ( (!isLoading) && (!isFirstRender)  &&  orders?.length === 0)  &&\r\n  <NotFounMessage>\r\n        <NotFounIcone >游놀游낕&zwj;游꼽</NotFounIcone>\r\n        <h3>Ning칰n pedido realizado, tienes hambre?</h3>\r\n\r\n      <ButtonPrimary small as={Link} to=\"/menu\">Ver Men칰</ButtonPrimary>\r\n    </NotFounMessage>}\r\n\r\n\r\n  {(orders?.length !== 0)  &&\r\n<OrdersTable>\r\n  <TableHead>\r\n    <tr>\r\n    <th>N췈 de Pedido</th>\r\n         <th>Fecha</th>\r\n        <th>Direcci칩n</th>\r\n            <th>Total</th>\r\n            <th>Estado</th>\r\n            <th >Acciones</th>\r\n            </tr>\r\n  </TableHead>\r\n  <tbody>\r\n    {orders?.map(order =>\r\n\r\n    <tr key={order?._id} onClick={(e) => seeDetails(order._id)}>\r\n    <td>{order?.orderID}</td>\r\n        <td>\r\n\r\n          <span>{new Date(order?.states[0].date).toLocaleString()?.split(\" \")[0]}</span>\r\n          <br></br>\r\n            <span>{new Date(order?.states[0].date).toLocaleString()?.split(\" \")[1]}</span>\r\n</td>\r\n        <td>{order.client[0].address}</td>\r\n        <td>${order?.total}</td>\r\n        <td> <b>{[...order?.states].reverse().find(state => state.confirmed ===true).name}</b></td>\r\n\r\n         <td  >\r\n                    <CancelOrderButton disabled={(order?.states[1].confirmed === true) ? true : false} onClick={ (e) => deleteOrder(e,order._id)}>\r\nCancelar Pedido\r\n                    </CancelOrderButton>\r\n           </td>\r\n        </tr>\r\n\r\n    )}\r\n\r\n  </tbody>\r\n\r\n</OrdersTable>\r\n\r\n}\r\n\r\n<PaginationButtons setPage={setPage} page={page} maxPage={maxPage} />\r\n</Page>\r\n  )\r\n}\r\n","import {useHistory} from 'react-router-dom'\r\nimport {useState, useEffect } from 'react'\r\nimport {useStorage} from '../context/useStorage'\r\nimport deleteOrderAPI from '../API/deleteOrderAPI'\r\n\r\nexport default function useUserOrdersPage({setNotification}){\r\n\r\nconst history = useHistory()\r\nconst {token,setIsLoading,currentUser} = useStorage()\r\n\r\n\r\n////redirects to order details page with order id as url parameter\r\n\r\nconst seeDetails = (orderID) =>{\r\nsetIsLoading(true)\r\n history.push(`/myAccount/myOrders/${orderID}` )\r\n}\r\nconst deleteOrder = async(e,id) =>{\r\n e.stopPropagation();\r\n\r\nif (!e.target.disabled ){\r\n\r\nsetIsLoadingPage(true)\r\nawait deleteOrderAPI({token,id})\r\nhandleRefresh()\r\n\r\n\r\n}\r\n}\r\n\r\n  let query = new URLSearchParams();\r\n    let sizeLimit = 5\r\n\r\n  const[isLoading,setIsLoadingPage] = useState(false)\r\n    const [page, setPage] = useState(1)\r\n    const [maxPage, setMaxPage] = useState(1)\r\n    const [orders, setOrders] = useState([])\r\nconst [isFirstRender, setIsFirstRender] = useState(true)\r\nlet [refreshCount,setRefreshCount] = useState(0)\r\n\r\n///add  search params to the url query\r\n\r\n   query.append('page',page)\r\n   query.append('limit',sizeLimit)\r\n   query.append('sort',\"-createdAt\")\r\n\r\n\r\n////get all user orders\r\n\r\nuseEffect(() => {\r\n     setNotification(0)\r\n  const controller = new AbortController()\r\n const signal = controller.signal\r\n\r\nconst ordersAPI = async () =>{\r\n    setIsLoadingPage(true)\r\n\r\n  try{\r\n\r\n\r\n       const headers = new Headers();\r\n      headers.append('Accept', 'application/json');\r\n      headers.append('Authorization', `Bearer ${token}`);\r\n\r\n\r\n    const setting = {\r\n          method: 'GET',\r\n          headers: headers,\r\nsignal,\r\n        }\r\n\r\n     let res = await fetch(`/api/orders/user/${currentUser._id}?${query}`,setting)\r\n     let json = await res.json()\r\n\r\n    setOrders(json.data)\r\n\r\n    let total = parseInt(json.total)\r\n\r\n     setMaxPage(Math.ceil(total/sizeLimit))\r\n\r\n\r\ndocument.querySelector('body').scrollTo(0,60)\r\n        setIsFirstRender(false)\r\n     setIsLoadingPage(false)\r\n\r\n  }catch(err){\r\n    if(err.name === 'AbortError'){\r\n   console.log('Fetch Canseled: caught abort')\r\n }else{\r\n\r\n     console.log(err)\r\n\r\n  }\r\n}\r\n  }\r\n\r\n  ordersAPI()\r\n\r\n     return () =>{\r\n     controller.abort()\r\n   }\r\n\r\n },[page,refreshCount])\r\n\r\n\r\n\r\n const handleRefresh = () =>{\r\n\r\nsetRefreshCount( Date.now())\r\nsetPage(1)\r\n}\r\n\r\nreturn {seeDetails,handleRefresh,setPage,page,isLoading,maxPage,orders,isFirstRender,deleteOrder}\r\n\r\n}","\r\nimport {Option,OptionList} from './SortProductsOptions'\r\n\r\nexport default function FilterOrdersStateOptions({setStatePreferece,setPage,defaultValue}){\r\n\r\n  const handelChange = (e) =>{\r\n e.preventDefault()\r\n     setPage(1)\r\n setStatePreferece(e.target.value)\r\n}\r\n\r\nreturn(\r\n<OptionList defaultValue={defaultValue}  name=\"filterOrdersByState\" onChange={(e) =>handelChange(e)}>\r\n<Option value=\"all\" >Todos</Option>\r\n<Option value=\"finish\" >Liquidados</Option>\r\n<Option value=\"unfinish\" >Pendientes</Option>\r\n</OptionList>\r\n\r\n);\r\n\r\n}","\r\nimport {Option,OptionList} from './SortProductsOptions'\r\n\r\nexport default function SortOrdersOptions({setSortPreferece,defaultValue}){\r\n\r\n\r\nreturn(\r\n<OptionList  defaultValue={defaultValue} name=\"sortProductBy\" onChange={(e) => setSortPreferece(e.target.value)}>\r\n<Option value=\"-createdAt\" >M치s recientes</Option>\r\n<Option value=\"createdAt\" >M치s antiguos</Option>\r\n<Option value=\"total\" >Menor Monto</Option>\r\n<Option value=\"-total\">Mayor Monto</Option>\r\n\r\n</OptionList>\r\n\r\n);\r\n\r\n}","import styled  from 'styled-components'\r\nimport useDashboardOrders from '../../hooks/useDashboardOrders'\r\nimport DashboardNav from '../DashboardNav'\r\nimport refreshIcone from '../../img/refresh.svg'\r\nimport SearchBar from '../MenuSearchBar'\r\nimport {RefreshButton,RefreshIcone} from '../account/UserOrdersPage'\r\nimport {LoaderSpinner} from './../LoaderSpinner'\r\nimport {NotFaundMessage} from '../menu/ProductsSection'\r\nimport {SectionTitle} from '../menu/Menu'\r\nimport {FiltersBoard} from './DashboardProducts'\r\nimport FilterOrderStateOptions from './../FilterOrderStateOptions'\r\nimport SortOrdersOptions from './../SortOrdersOptions'\r\nimport PaginationButtons from '../PaginationButtons'\r\nimport OrdersTableSkeleton from '../OrdersTableSkeleton'\r\n\r\nexport const Page = styled.section`\r\n    padding: 60px 05px;\r\nmin-height:100vh;\r\nwidth:100%;\r\nmax-width: 1250px;\r\nmargin: 0 auto;\r\ntext-align:center;\r\n  &:before{\r\n    display: ${props => props.isLoading ? 'block' : 'none'};\r\n      position:absolute;\r\n      content:\" \";\r\n      top:0;\r\n      left:0;\r\n    right:0;\r\n    bottom:0;\r\n    background:#ffffff57;\r\n    z-index:400;\r\n    }\r\n       & >${LoaderSpinner} {\r\n  position: fixed;\r\n    top: 50%;\r\n    left: 50%;\r\n    z-index: 500;\r\n    margin: -60px 0  0 -60px ;\r\n\r\n}\r\n& > ${NotFaundMessage} {\r\n  padding: 0 5px;\r\n}\r\n& > ${FiltersBoard} {\r\n margin: 30px 5px 0;\r\n}\r\n\r\n`;\r\nexport const TableHead = styled.thead`\r\nbackground-color: #171717;\r\ncolor: #fcba1c;\r\n& >tr th {\r\n   padding: 10px 0;\r\n       font-family: \"Oswald\", sans-serif;\r\n       font-size:19px;\r\n}\r\n`;\r\nexport const OrdersTable = styled.table`\r\n    width: 100%;\r\nmax-width:900px;\r\nmargin: 20px auto 40px;\r\n    border-spacing: 10px;\r\n    border-collapse: collapse;\r\n    border: 2px solid #171717;\r\n        text-transform: capitalize;\r\n\r\n&> tbody{\r\n  background:#fff;\r\n}\r\n\r\n& >tbody tr td {\r\n  padding: 10px 0;\r\n  cursor:pointer;\r\n\r\n}\r\n& >tbody tr {\r\n\r\n  border-bottom: 1px solid ;\r\n}\r\n& >tbody tr td small {\r\n  margin-left:   5px ;\r\n\r\n}\r\n@media screen and (max-width: 750px){\r\n\r\n    max-width: 400px;\r\n\r\n  & > ${TableHead}{\r\n  display: none;\r\n  max-width: 400px;\r\n}\r\n& tbody tr {\r\ndisplay: flex;\r\n  flex-direction: column;\r\n}\r\n& >  tbody tr td {\r\n      display: flex;\r\n    padding: 5px 15px;\r\n    text-align: right;\r\n}\r\n& >  tbody tr td:first-child {\r\n  color:#fff;\r\n  padding: 10px 15px;\r\nbackground-color: #171717;\r\n}\r\n& >  tbody tr td:first-child:before {\r\ncontent:\"N췈 de Pedido\";\r\n    color: ${props => props.theme.darckYellow};\r\n}\r\n& >  tbody tr td:nth-child(2):before {\r\ncontent:\"Fecha\";\r\n}\r\n& >  tbody tr td:nth-child(3):before {\r\ncontent:\"Direcci칩n\";\r\n}\r\n& >  tbody tr td:nth-child(5):before {\r\ncontent:\"Estado\";\r\n}\r\n& >  tbody tr td:nth-child(4):before {\r\ncontent:\"Total\";\r\n}\r\n& >tbody tr td:before{\r\n      margin-right: auto;\r\n    font-family: \"Oswald\", sans-serif;\r\n    font-size: 16px;\r\n    align-self: center;\r\n\r\n}\r\n\r\n\r\n}\r\n`\r\n\r\nexport default function DashboardOrders({setNotification}){\r\n\r\n\r\n\r\n\r\nconst {seeDetails,handleRefresh,setOrderID,setSorting,setPage,setState,page,isLoading,maxPage,orders,sorting,isFirstRender,orderID,state} = useDashboardOrders({setNotification})\r\n\r\n\r\n  return(\r\n<Page  isLoading={isLoading}>\r\n     <DashboardNav/>\r\n     <SectionTitle>Pedidos</SectionTitle>\r\n\r\n<SearchBar defaultValue={orderID} placeholder='N칰mero de orden...' setSearch={setOrderID} />\r\n<FiltersBoard>\r\n          <FilterOrderStateOptions defaultValue={state}  setPage={setPage} setStatePreferece={setState}/>\r\n          <SortOrdersOptions defaultValue={sorting}  setSortPreferece={setSorting}  />\r\n        </FiltersBoard>\r\n\r\n  <RefreshButton data-testid=\"refresh-button\" onClick={ () => handleRefresh()}>\r\n  <RefreshIcone src={refreshIcone} title='Refrescar P치gina'/>\r\n  </RefreshButton>\r\n  {isLoading ? <LoaderSpinner /> :  null }\r\n\r\n  {( (isLoading) && (isFirstRender))  &&  <OrdersTableSkeleton/>}\r\n\r\n  { ( (!isLoading) && (!isFirstRender)  &&  orders?.length === 0) &&\r\n  <NotFaundMessage>No se han encontrado coincidencias, intenta de nuevo!!</NotFaundMessage>\r\n  }\r\n\r\n  {  (orders?.length !== 0) &&\r\n<OrdersTable>\r\n  <TableHead>\r\n    <tr>\r\n    <th>N췈 de Pedido</th>\r\n         <th>Fecha</th>\r\n        <th>Direcci칩n</th>\r\n            <th>Total</th>\r\n            <th>Estado</th>\r\n    </tr>\r\n  </TableHead>\r\n  <tbody>\r\n{orders?.map(order =>\r\n    <tr key={order?.orderID}   onClick={ (e) => seeDetails(order?._id)}>\r\n    <td>{order?.orderID}</td>\r\n        <td>\r\n          <span>{new Date(order.states[0].date).toLocaleString().split(\" \")[0]}</span>\r\n              <br></br>\r\n            <span>{new Date(order.states[0].date).toLocaleString().split(\" \")[1]}</span>\r\n</td>\r\n        <td>{order?.client[0].address}</td>\r\n        <td>${order?.total}</td>\r\n        <td> <b>{[...order?.states].reverse().find(state => state.confirmed ===true).name}</b></td>\r\n\r\n</tr>\r\n\r\n\r\n  )}\r\n\r\n  </tbody>\r\n\r\n</OrdersTable> }\r\n\r\n<PaginationButtons setPage={setPage} page={page} maxPage={maxPage} />\r\n\r\n</Page>\r\n\r\n  )\r\n}","import {useHistory,useLocation} from 'react-router-dom'\r\nimport {useState, useEffect } from 'react'\r\nimport {useStorage} from '../context/useStorage'\r\n\r\n\r\nexport default function useDashboardOrders({setNotification}){\r\nconst history = useHistory()\r\nconst location = useLocation()\r\n\r\n\r\n\r\nconst {token,setIsLoading} = useStorage()\r\n\r\n\r\nconst seeDetails = (orderID) =>{\r\n      setIsLoading(true)\r\n history.push(`/dashboard/orders/${orderID}` )\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n    let sizeLimit = 5\r\n\r\n\r\n  const [oldQuery, setOldQuery] = useState( new URLSearchParams(location.search))\r\n  const [orderID, setOrderID] = useState(\"\")\r\n  const[isLoading,setIsLoadingPage] = useState(false)\r\n    const [page, setPage] = useState(1)\r\n    const [maxPage, setMaxPage] = useState(1)\r\n    const [orders, setOrders] = useState([])\r\n    const [state,setState] =useState('all')\r\n  const [sorting, setSorting] = useState(\"-createdAt\")\r\nconst [isFirstRender, setIsFirstRender] = useState(true)\r\nlet [refreshCount,setRefreshCount] = useState(0)\r\n\r\n\r\n let query ;\r\n\r\nif(isFirstRender){\r\nquery = new URLSearchParams(oldQuery.toString())\r\n}else{\r\n query = new URLSearchParams() ;\r\n  query.append('sort', sorting)\r\n  query.append('page', page)\r\n  query.append('limit', sizeLimit)\r\n}\r\n\r\n\r\n\r\n\r\nuseEffect(() => {\r\n\r\nif(orderID !==\"\"){\r\nquery.append('orderID',orderID)\r\nsetState('all')\r\n}\r\nif(state !==\"all\"){\r\nquery.append('state',state)\r\n}\r\n\r\nsetPage(1)\r\n\r\n},[orderID,state,sorting])\r\n\r\n\r\nuseEffect(() => {\r\n    setNotification(0)\r\n  const controller = new AbortController()\r\n const signal = controller.signal\r\n\r\n\r\n\r\nconst ordersAPI = async () =>{\r\n    setIsLoadingPage(true)\r\n\r\n  try{\r\n\r\n\r\n       const headers = new Headers();\r\n      headers.append('Accept', 'application/json');\r\n      headers.append('Authorization', `Bearer ${token}`);\r\n\r\n\r\n    const setting = {\r\n          method: 'GET',\r\n          headers: headers,\r\nsignal,\r\n        }\r\n\r\n     let res = await fetch(`/api/orders?${query}`,setting)\r\n     let json = await res.json()\r\n\r\n    setOrders(json.data)\r\n\r\n    let total = parseInt(json.total)\r\n\r\n     setMaxPage(Math.ceil(total/sizeLimit))\r\n\r\n  history.push(`/dashboard/orders?${query}`)\r\n\r\ndocument.querySelector('body').scrollTo(0,60)\r\n        setIsFirstRender(false)\r\n     setIsLoadingPage(false)\r\n\r\n  }catch(err){\r\n    if(err.name === 'AbortError'){\r\n   console.log('Fetch Canseled: caught abort')\r\n }else{\r\n\r\n     console.log(err)\r\n\r\n  }\r\n}\r\n  }\r\n\r\n  ordersAPI()\r\n\r\n\r\n     return () =>{\r\n     controller.abort()\r\n   }\r\n }, [orderID,state,page,sorting,refreshCount])\r\n\r\n\r\n\r\n\r\n const handleRefresh = () =>{\r\nsetRefreshCount(Date.now())\r\nsetPage(1)\r\nsetSorting('-createdAt')\r\nsetState('all')\r\n}\r\n\r\n\r\nreturn {seeDetails,handleRefresh,setOrderID,setSorting,setState,setPage,page,isLoading,maxPage,orders,sorting,isFirstRender,orderID,sorting,state}\r\n\r\n\r\n}","import getCategoriesAPI from './getCategoriesAPI'\r\n\r\n\r\nexport default async function updateCategoryNameAPI({categorySelectId,info,setIsRenameFormLoading,setIsSuccessfullySend,token,setAllCategories}){\r\n\r\nsetIsRenameFormLoading(true)\r\n\r\n   const headers = new Headers();\r\n        headers.append('Accept', 'application/json');\r\nheaders.append('Content-Type', 'application/json');\r\n      headers.append('Authorization', `Bearer ${token}`);\r\n\r\n        const setting = {\r\n          method: 'PUT',\r\n          headers: headers,\r\n          body: JSON.stringify(info),\r\n        }\r\n\r\n\r\ntry{\r\n\r\n        let res = await fetch(`/api/categories/${categorySelectId}`, setting);\r\n  \r\n\r\nsetIsRenameFormLoading(false)\r\n\r\n         if(res.status === 200) {\r\n    \r\n\r\n       await getCategoriesAPI(setAllCategories)\r\n\r\n         setIsSuccessfullySend(true);\r\n         setTimeout(() => {\r\n\r\n                  setIsSuccessfullySend(false)\r\n         }, 3000);\r\n\r\n     return\r\n      }\r\n      \r\n\r\n\r\n }catch(err){\r\n\r\n  console.log(err)\r\n}\r\n\r\n\r\n}","\r\nimport getCategoriesAPI from './getCategoriesAPI'\r\n\r\nexport default async function  deleteCategoryAPI({categorySelectId,token,setAllCategories}){\r\n\r\n const headers = new Headers();\r\n           headers.append('Accept', 'application/json');\r\n     headers.append('Authorization', `Bearer ${token}`);\r\n        const setting = {\r\n          method: 'DELETE',\r\n          headers: headers,\r\n\r\n        }\r\n\r\n\r\ntry {\r\n        let res = await fetch(\"/api/categories/\"+categorySelectId, setting);\r\n\r\n     if(res.status  ===204 ){\r\n       await getCategoriesAPI(setAllCategories)\r\n       return\r\n     }\r\nif(res.status === 403) return   alert('Se require rol de Administrador') \r\n\r\n}catch(err){\r\n  console.log(err)\r\n}\r\n\r\n}","import getCategoriesAPI from './getCategoriesAPI'\r\n\r\nasync function createCategoryAPI({token,info,setAllCategories,setIsCreateFormLoading,setIsSuccessfullySend,e}){\r\n\r\n\r\n  setIsCreateFormLoading(true)\r\ntry {\r\n\r\n\r\n  const headers = new Headers();\r\n\r\n headers.append('Accept', 'application/json');\r\nheaders.append('Content-Type', 'application/json');\r\n headers.append('Authorization', `Bearer ${token}`);\r\n\r\n\r\n       \r\n\r\n        const setting = {\r\n          method: 'POST',\r\n            body: JSON.stringify(info),\r\n          headers: headers,\r\n        }\r\n\r\n        let res = await fetch(\"/api/categories\", setting);\r\n\r\n      setIsCreateFormLoading(false)\r\n\r\n      if(res.status === 201) {\r\n\r\n      await getCategoriesAPI(setAllCategories)\r\n      e.target.newCategory.value = \"\"\r\n      setIsSuccessfullySend(true)\r\n      setTimeout(() => {\r\n              setIsSuccessfullySend(false)\r\n      }, 3000);\r\n return\r\n      \r\n      \r\n    }\r\n\r\n\r\n       \r\n}catch(err){\r\n\r\n  console.log(err)\r\n\r\n}\r\n\r\n}\r\nexport default createCategoryAPI","import {useState,useEffect} from 'react'\r\nimport {useStorage} from '../context/useStorage'\r\n import updateCategoryNameAPI from '../API/updateCategoryNameAPI'\r\nimport deleteCategoryAPI  from '../API/deleteCategoryAPI'\r\nimport createCategoryAPI from '../API/createCategoryAPI'\r\n\r\n\r\n \r\nexport default function useCategoriesForms(){\r\n\r\n   const {categories,setIsSuccessfullySend,token,setAllCategories} = useStorage()\r\n\r\n const [editingCategory,setEditingCategory] = useState('categoria')\r\n   const [isRenameFormLoading, setIsRenameFormLoading] = useState(false)\r\n      const [isCreateFormLoading, setIsCreateFormLoading] = useState(false)\r\n\r\n  const [categorySelectId,setCategorySelectId] = useState('')\r\n\r\n\r\nuseEffect(()=>{\r\n\r\nlet categoryId = categories?.find(category => category.name === editingCategory )?._id\r\n\r\nsetCategorySelectId(categoryId)\r\n\r\n},[editingCategory,categories])\r\n\r\n\r\n\r\n\r\nconst handleDelete =async (e) =>{\r\n  e.preventDefault()\r\n e.stopPropagation()\r\n const confirmation =window.confirm('Al eliminar la categor칤a se eliminarn todos los productos de la misma, est치 deguro?')\r\n\r\nif(confirmation) {\r\n  await deleteCategoryAPI({categorySelectId,token,setAllCategories})\r\n  setEditingCategory('category')\r\n  return\r\n}\r\n\r\n}\r\n\r\n\r\nconst handleRenameSubmit = (e) =>{\r\n e.preventDefault()\r\n e.stopPropagation()\r\n\r\n   const info ={\r\ncategoryNewName : e.target.categoryNewName.value.trim()\r\n   }\r\n\r\n  updateCategoryNameAPI({categorySelectId,info,setIsRenameFormLoading,setIsSuccessfullySend,token,setAllCategories})\r\nsetEditingCategory('category')\r\n}\r\nconst handleCreateSubmit = (e) =>{\r\ne.preventDefault()\r\n e.stopPropagation()\r\nconst info = {\r\n  category: e.target.newCategory.value.trim()\r\n}\r\ncreateCategoryAPI({token,info,setAllCategories,setIsCreateFormLoading,setIsSuccessfullySend,e})\r\n\r\n}\r\n  return {handleRenameSubmit,handleCreateSubmit,setEditingCategory,editingCategory,\r\nhandleDelete,isRenameFormLoading,isCreateFormLoading,categories} \r\n  \r\n}","import styled  from 'styled-components'\r\nimport { withError } from './../withError'\r\nimport {Page} from './DashboardOrders'\r\nimport useDashboardCategories from '../../hooks/useDashboardCategories'\r\nimport {SectionTitle} from '../menu/Menu'\r\nimport DashboardNav from '../DashboardNav'\r\nimport {TextInput,LoadButton,OptionList,Option} from './CreateNewProductForm'\r\nimport {LoaderSpinner} from './../LoaderSpinner'\r\n\r\n\r\nconst CategoriesPage = styled(Page)`\r\n    background:${props => props.theme.lightYellow};\r\npadding: 65px 5px;\r\n    max-height: max-content;\r\nmin-width:100%;\r\n`\r\n\r\n\r\nconst Input = styled(TextInput)`\r\nbackground: rgb(0 0 0 / 7%);\r\n      box-shadow: :${props => props.theme.inputBoxShadow};\r\n`\r\nconst Wrapper = styled.section`\r\nwidth:100%:\r\nmax-width:1250px;\r\nmargin:30px auto;\r\ndisplay:flex;\r\nflex-wrap:wrap;\r\njustify-content:center;\r\ngap:10px;\r\n&> article{\r\n  flex: 1 1 400px;\r\n  width: 100%;\r\n}\r\n\r\n\r\n`\r\n\r\n\r\n\r\nconst FormCard = styled.article`\r\n    padding: 20px 15px;\r\n    margin-bottom: 20px;\r\n    border-radius: 10px;\r\n    max-width: 400px;\r\n        padding: 20px 15px 40px;\r\n        height:max-content;\r\n        background:#fff;\r\n        box-shadow:${props => props.theme.lightBoxShadow};\r\n& > h4{\r\n      margin: 10px 0 24px;\r\n        font-size: 25px;\r\n}\r\n& >form  h4{\r\n      margin: 10px 0 24px;\r\n        font-size: 25px;\r\n}\r\n      \r\n    & > form select {\r\n     min-width:95%;\r\n    }\r\n    & > form small {\r\n       position: absolute;\r\n    margin-top: -18px;\r\n    margin-left: 10px;\r\n    }\r\n\r\n & > form buttons {\r\n   transfor:scale(0.8);\r\n       position: absolute;\r\n    margin-top: -18px;\r\n    margin-left: 10px;\r\n    }\r\n  @media screen and (max-width: 450px){\r\n    & > h4{\r\n     line-height:  24px;\r\n        font-size: 20px;\r\n}\r\n   & > form h4{\r\n      line-height:  24px;\r\n        font-size: 20px;\r\n}\r\n  \r\n  }\r\n\r\n`\r\nconst DeleteButton = styled.button`\r\n    padding: 11px 25px 12px;\r\n    transition: all 0.5s;\r\n    margin-bottom: 20px;\r\n    cursor: pointer;\r\n    text-transform: uppercase;\r\n    background: ${props => props.theme.black};\r\n    border: none;\r\n    box-shadow: ${props => props.theme.lightBoxShadow};\r\n    color: white;\r\n    letter-spacing: 1px;\r\nfont-size: 15px;\r\n    font-family: \"Oswald\",sans-serif;\r\n    border-radius: 4px;\r\n    &:hover{\r\n  background:${props => props.theme.orange};\r\n    }\r\n `\r\nfunction DashboardCategories(){\r\n\r\n\r\nconst  {handleRenameSubmit,handleCreateSubmit ,handleDelete,setEditingCategory,editingCategory,isRenameFormLoading,isCreateFormLoading,categories}  = useDashboardCategories()\r\n\r\n  return(\r\n    <CategoriesPage>\r\n         <DashboardNav/>\r\n      <SectionTitle light>Categor칤as</SectionTitle>\r\n\r\n      <Wrapper>\r\n\r\n                <FormCard>\r\n\r\n        <h4>Elimeinar categor칤a</h4>\r\n\r\n  <form name=\"editCategory\"  onSubmit={handleRenameSubmit}>\r\n\r\n\r\n  <OptionList name=\"category\" onChange={(e) =>setEditingCategory(e.target.value)}>\r\n \r\n  {categories?.map(cat =>\r\n\r\n<Option key={cat?._id } value={cat?.name} >{cat?.name}</Option>\r\n\r\n  )}\r\n\r\n</OptionList>\r\n\r\n                  <DeleteButton onClick={handleDelete}>Eliminar</DeleteButton>\r\n     \r\n<hr></hr>\r\n\r\n\r\n                        <h4>Remombrar categor칤a</h4>\r\n\r\n  <Input placeholder={`Renombrar ${editingCategory}`} name=\"categoryNewName\"   />\r\n      {isRenameFormLoading  && <LoaderSpinner small />  }\r\n<LoadButton as=\"input\" type=\"submit\" value=\"Editar\"/>\r\n\r\n\r\n</form>\r\n\r\n        </FormCard>\r\n\r\n\r\n\r\n        <FormCard>\r\n          <h4>Crear una nueva categor칤a</h4>\r\n\r\n<form  name=\"createCategory\"  onSubmit={handleCreateSubmit}>\r\n\r\n  <Input    placeholder=\"Nueva categor칤a...\"    name=\"newCategory\"      />\r\n\r\n        {isCreateFormLoading  && <LoaderSpinner small />  }\r\n\r\n<LoadButton as=\"input\" type=\"submit\" value=\"Cargar\"/>\r\n\r\n</form>\r\n\r\n        </FormCard>\r\n\r\n      </Wrapper>\r\n    </CategoriesPage>\r\n  )\r\n}\r\nexport default withError(DashboardCategories)"],"sourceRoot":""}